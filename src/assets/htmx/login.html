{{ define "login" }}
<div>
  <form id="login-form" action="submit">
    <fieldset id="login-box-boundaries">
      <legend>LOGIN</legend>
      <div class="login-container">
        <div id="login-state" class="warning"></div><br>
        <!-- <label for="login-user">USERNAME</label> -->
        <input autofocus class="tui-input" type="text" name="login-user" id="login-user"><br><br>
        <!-- <label for="login-pass">PASSWORD</label> -->
        <input class="tui-input" type="password" name="login-pass" id="login-pass"><br><br>
        <button 
          hx-post="/login" 
          hx-swap="none"
          type="submit" 
          id="login-submit-button">Login</button>
          <br>
      </div>
    </fieldset>
  </form>
</div>

<script>
  document.body.addEventListener("wrongCredentials", function(evt) {
    var messageDiv = document.getElementById("login-state")
    messageDiv.innerHTML = evt.detail.value

    setTimeout(() => {
      messageDiv.innerHTML = ""
    }, 3000);
  });

  // Add the spinner
  var btn = document.getElementById("login-submit-button");
  btn.addEventListener('htmx:beforeRequest', function (evt) {
    btn.classList.add("loading");
    spinner(btn)
  });

  btn.addEventListener('htmx:afterRequest', function (evt) {
    btn.classList.remove("loading");
  });
</script>
{{ end }}
